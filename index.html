<!DOCTYPE html>
<html>
<head>
  <title>Adaptive Quiz Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    #question { font-size: 1.2em; }
    #feedback { margin-top: 10px; font-weight: bold; }
    #progress { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Adaptive Quiz Demo</h1>
  <div id="quiz-container">
    <p id="question">Question will appear here</p>
    <input type="text" id="answerInput" placeholder="Type your answer" />
    <button id="submitBtn">Submit</button>
    <p id="feedback"></p>
    <p id="progress"></p>
  </div>

<script>
let currentLevel = 0;
let correctStreak = 0;
let wrongStreak = 0;
let questionCount = 0;
const maxQuestions = 20;

// Define sample questions for each difficulty level (0 = easiest, 10 = hardest)
const questions = {
  0: [ {q: "1 + 1 = ?", a: 2},    {q: "2 + 3 = ?", a: 5} ],
  1: [ {q: "5 - 3 = ?", a: 2},    {q: "2 * 2 = ?", a: 4} ],
  2: [ {q: "10 / 2 = ?", a: 5},   {q: "9 + 6 = ?",  a: 15} ],
  3: [ {q: "12 - 4 = ?", a: 8},   {q: "3 * 5 = ?",  a: 15} ],
  4: [ {q: "15 / 3 = ?", a: 5},   {q: "7 + 8 = ?",  a: 15} ],
  5: [ {q: "14 - 5 = ?", a: 9},   {q: "4 * 4 = ?",  a: 16} ],
  6: [ {q: "18 / 3 = ?", a: 6},   {q: "11 + 7 = ?", a: 18} ],
  7: [ {q: "21 - 6 = ?", a: 15},  {q: "5 * 5 = ?",  a: 25} ],
  8: [ {q: "24 / 4 = ?", a: 6},   {q: "9 + 11 = ?", a: 20} ],
  9: [ {q: "27 - 3 = ?", a: 24},  {q: "6 * 6 = ?",  a: 36} ],
  10:[ {q: "30 / 5 = ?", a: 6},   {q: "8 + 8 = ?",  a: 16} ]
};

// Function to show the next question or finish the quiz
function nextQuestion() {
  // If we have reached max questions, show final result
  if (questionCount >= maxQuestions) {
    document.getElementById("question").innerText = "Quiz finished!";
    document.getElementById("progress").innerText =
      "Final Level: " + currentLevel;
    document.getElementById("submitBtn").disabled = true;
    return;
  }
  // Pick a random question object from the current level
  const qList = questions[currentLevel];
  const qObj = qList[Math.floor(Math.random() * qList.length)];
  // Display the question
  document.getElementById("question").innerText = qObj.q;
  document.getElementById("feedback").innerText = "";
  document.getElementById("answerInput").value = "";
  document.getElementById("progress").innerText =
    "Question " + (questionCount + 1) + " of " + maxQuestions +
    " (Level " + currentLevel + ")";
  // Store the correct answer in the button's data attribute for later checking
  document.getElementById("submitBtn").dataset.answer = qObj.a;
}

// Event listener for answer submission
document.getElementById("submitBtn").addEventListener("click", function() {
  // Read the user's answer and the correct answer
  const userAns = parseInt(document.getElementById("answerInput").value);
  const correctAns = parseInt(this.dataset.answer);
  questionCount++;

  // Check if the answer is correct
  if (userAns === correctAns) {
    correctStreak++;
    wrongStreak = 0;
    document.getElementById("feedback").innerText = "Correct!";
  } else {
    wrongStreak++;
    correctStreak = 0;
    document.getElementById("feedback").innerText =
      "Wrong! The correct answer was " + correctAns;
  }

  // Apply the adaptive rules: two correct in a row ⇒ level up; two wrong in a row ⇒ level down
  if (correctStreak >= 2 && currentLevel < 10) {
    currentLevel++;
    correctStreak = 0;
  }
  if (wrongStreak >= 2 && currentLevel > 0) {
    currentLevel--;
    wrongStreak = 0;
  }

  // Show the next question (or finish if done)
  nextQuestion();
});

// Start the quiz by showing the first question
nextQuestion();
</script>
</body>
</html>
